// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id         Int      @id @default(autoincrement())
  email      String   @unique @db.Text
  username   String?  @db.VarChar(255)
  password   String   @db.Text
  icon       String   @db.Text
  credits    Int      @db.Integer
  calories   Int      @db.Integer
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
}

model FoodTypes {
  id         Int      @id @default(autoincrement())
  name       String   @db.VarChar(255)
  icon       String   @db.Text
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
  foods      Foods[]
}

model Foods {
  id           Int       @id @default(autoincrement())
  name         String    @db.Text
  food_types   FoodTypes @relation(fields: [food_type_id], references: [id])
  food_type_id Int       @db.Integer
  image        String    @db.Text
  calories     Int       @db.Integer
  description  String    @db.Text
  ingredients  Json      @db.Json
  allergens    Json      @db.Json
  created_at   DateTime  @default(now()) @db.Timestamptz
  updated_at   DateTime  @updatedAt @db.Timestamptz
}

model Food_History {
  id                Int      @id @default(autoincrement())
  user_id           Int      @db.Integer
  food_id           Int      @db.Integer
  collection_status String   @db.Text
  gym_id            Int      @db.Integer
  created_at        DateTime @default(now()) @db.Timestamptz
  updated_at        DateTime @updatedAt @db.Timestamptz
}

model District {
  id         Int      @id @default(autoincrement())
  name       String   @db.VarChar(255)
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
  gyms       Gyms[]
}

model Franchise {
  id         Int      @id @default(autoincrement())
  name       String   @db.VarChar(255)
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
  email      String   @db.Text
  telephone  String   @db.Text
  Gyms       Gyms[]
}

model Gyms {
  id              Int       @id @default(autoincrement())
  name            String    @db.VarChar(255)
  username        String    @db.VarChar(255)
  password        String    @db.Text
  location_id     Int       @db.Integer
  franchise       Franchise @relation(fields: [franchise_id], references: [id])
  franchise_id    Int       @db.Integer
  district        District  @relation(fields: [district_id], references: [id])
  district_id     Int       @db.Integer
  opening_hour    Int       @db.Integer
  closing_hour    Int       @db.Integer
  no_close        Boolean   @db.Boolean
  address         String    @db.Text
  google_position Json      @db.Json
  created_at      DateTime  @default(now()) @db.Timestamptz
  updated_at      DateTime  @updatedAt @db.Timestamptz
}

model Trainers {
  id             Int      @id @default(autoincrement())
  name           String   @db.VarChar(255)
  icon           String   @db.Text
  certifications String   @db.Text
  franchise_id   Int      @db.Integer
  created_at     DateTime @default(now()) @db.Timestamptz
  updated_at     DateTime @updatedAt @db.Timestamptz
}

model Intensities {
  id         Int      @id @default(autoincrement())
  level      String   @db.Text
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
}

model CourseTypes {
  id         Int      @id @default(autoincrement())
  name       String   @db.Text
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
}

model Courses {
  id                 Int      @id @default(autoincrement())
  intensity_id       Int      @db.Integer
  course_type_id     Int      @db.Integer
  gym_id             Int      @db.Integer
  name               String   @db.Text
  credits            Int      @db.Integer
  calorise           Int      @db.Integer
  duration           Int      @db.Integer
  default_quota      Int      @db.Integer
  default_trainer_id Int      @db.Integer
  created_at         DateTime @default(now()) @db.Timestamptz
  updated_at         DateTime @updatedAt @db.Timestamptz
}

model CourseSchedules {
  id         Int      @id @default(autoincrement())
  course_id  Int      @db.Integer
  trainer_id Int      @db.Integer
  quota      Int      @db.Integer
  time       DateTime @db.Timestamptz
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
}

model FavouriteCourse {
  id         Int      @id @default(autoincrement())
  user_id    Int      @db.Integer
  course_id  Int      @db.Integer
  created_at DateTime @default(now()) @db.Timestamptz
  updated_at DateTime @updatedAt @db.Timestamptz
}
